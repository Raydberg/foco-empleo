---
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import heroImage from "../assets/hero.webp";
import JobList from "../modules/jobs/JobList.astro";
import InputSearch from "../shared/components/InputSearch.astro";
import { getCollection } from "astro:content";
import BlogCarousel from "../modules/blogs/BlogCarousel.astro";
import { getPubDate } from "../core/utils/getFileDate";


const blogPosts = await getCollection("blog");
const sortedPosts = blogPosts
	.sort((a, b) => getPubDate(b).getTime() - getPubDate(a).getTime())
	.slice(0, 10);
---

<Layout title="Inicio">
	<div
		slot="header-hero"
		class="relative w-full min-h-[400px] md:min-h-[400px] flex items-center justify-center"
	>
		<Image
			src={heroImage}
			alt="Oficina moderna con personas trabajando colaborativamente"
			class="absolute inset-0 w-full h-full object-cover -z-20"
			loading="eager"
			widths={[400, 800, 1200]}
			sizes="(max-width: 768px) 100vw, 100vw"
		/>

		<div
			class="absolute inset-0 bg-linear-to-b from-black/80 from-0% via-black/60 via-50% to-black/40 to-100% -z-10"
		>
		</div>

		<div
			class="container mx-auto px-4 pt-24 pb-12 md:pt-32 text-center relative z-10"
		>
			<h1
				class="text-3xl md:text-5xl font-bold mb-4 text-white leading-tight"
			>
				Encuentra el trabajo que buscas
			</h1>
			<p
				class="text-base md:text-lg text-white/90 mb-8 max-w-2xl mx-auto"
			>
				Accede a empleos en espa√±ol en un solo lugar
			</p>
			<InputSearch />
		</div>
	</div>
	<div
		class="container mx-auto px-4 max-w-5xl mt-12 mb-6 flex justify-between items-end"
	>
		<h2 class="text-3xl md:text-4xl font-bold text-gray-900">
			Empleos Destacados
		</h2>
		<a
			href="/jobs"
			class="hidden md:flex items-center gap-2 text-teal-800 font-semibold hover:text-teal-600 transition-colors"
		>
			Ver todas las vacantes
			<svg
				xmlns="http://www.w3.org/2000/svg"
				fill="none"
				viewBox="0 0 24 24"
				stroke-width="2"
				stroke="currentColor"
				class="w-4 h-4"
			>
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path>
			</svg>
		</a>
	</div>
	<div class="min-h-[600px]">
		<!-- <JobList jobs={featuredJobs} variant="list" limit={10} /> -->
	</div>
	<BlogCarousel posts={sortedPosts} />
</Layout>
