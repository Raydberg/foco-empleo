---
import { Image } from "astro:assets";
import logoSvg from "../../assets/logo.svg";
import FacebookIcon from "../icons/FacebookIcon.astro";

import LinkedinIcon from "../icons/LinkedinIcon.astro";
import LegalModal from "../../modules/politics/LegalModal.astro";
import LegalNotice from "../../modules/politics/LegalNotice.astro";
import CookiesPolitics from "../../modules/politics/CookiesPolitics.astro";
import PoliticsContent from "../../modules/politics/PoliticsContent.astro";
import ConditionsContent from "../../modules/politics/ConditionsContent.astro";

const currentYear = new Date().getFullYear();

const footerLinks = [
    { name: "Sobre nosotros", href: "/about" },
    { name: "Contacto", href: "/contact" },
];

const legalLinks = [
    {
        name: "Aviso Legal",
        id: "legal-notice-modal",
        title: "Aviso Legal",
    },
    {
        name: "Política de cookies",
        id: "cookies-modal",
        title: "Política de Cookies",
    },
    {
        name: "Política de privacidad",
        id: "politics-modal",
        title: "Política de Privacidad",
    },
    {
        name: "Términos y condiciones",
        id: "conditions-modal",
        title: "Términos y Condiciones",
    },
];
---

<footer class="w-full bg-linear-to-b from-[#309689] to-[#0F4C5C] pt-16 pb-8">
    <div class="container mx-auto px-6">
        <div
            class="flex flex-col md:flex-row justify-between items-center md:items-start gap-8 mb-12"
        >
            <div class="flex flex-col items-center md:items-start">
                <a
                    href="/"
                    class="flex items-start gap-2 group"
                    aria-label="Ir al inicio"
                >
                    <Image
                        src={logoSvg}
                        alt="Logotipo de Foco Empleo"
                        width={60}
                        height={60}
                        loading="lazy"
                        class="w-14 h-14 transition-transform group-hover:scale-105"
                    />
                    <div class="flex flex-col">
                        <span
                            class="text-xl md:text-2xl font-semibold text-white"
                            >Foco Empleo</span
                        >
                        <span class="text-sm md:text-xl font-regular text-white"
                            >Tu futuro laboral comienza con un buen enfoque</span
                        >
                    </div>
                </a>
            </div>

            <div class="text-center md:text-left">
                <h3 class="text-lg font-semibold text-white mb-4">Acerca</h3>
                <ul class="space-y-2">
                    {
                        footerLinks.map((link) => (
                            <li>
                                <a
                                    href={link.href}
                                    class="text-white hover:text-[#0F4C5C] font-medium transition-colors duration-200"
                                >
                                    {link.name}
                                </a>
                            </li>
                        ))
                    }
                </ul>
            </div>

            <div class="flex gap-4 justify-center md:justify-end">
                <a
                    href="https://www.linkedin.com/company/foco-empleo"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Síguenos en LinkedIn"
                    class="bg-[#0F4C5C] text-white rounded-lg hover:bg-[#0a3540] transition-colors"
                >
                    <LinkedinIcon />
                </a>
                <a
                    href="https://facebook.com"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Síguenos en Facebook"
                    class="bg-[#0F4C5C] text-white rounded-lg hover:bg-[#0a3540] transition-colors"
                >
                    <FacebookIcon />
                </a>
            </div>
        </div>
    </div>

    <hr class="border-t-2 border-[#0F4C5C] w-full mb-8" />

    <div class="container mx-auto px-6">
        <div
            class="flex flex-col md:flex-row justify-between items-center text-sm text-gray-200 gap-6"
        >
            <div class="flex items-center gap-1 text-xs md:text-sm text-center">
                &copy; Copyright {currentYear}. Diseñado por Foco empleo con
                <span class="text-[#FECF33] animate-pulse">♥</span>
            </div>

            <ul
                class="flex gap-3 md:gap-6 items-center flex-wrap justify-center md:justify-end text-xs md:text-sm"
            >
                {
                    legalLinks.map((link) => (
                        <li class="flex items-center gap-1 md:gap-2">
                            <span class="text-gray-200">•</span>
                            <button
                                class="open-modal hover:text-white transition-colors cursor-pointer whitespace-nowrap"
                                data-modal={link.id}
                            >
                                {link.name}
                            </button>
                        </li>
                    ))
                }
            </ul>
        </div>
    </div>
</footer>

<!-- Modales -->
<LegalModal id="legal-notice-modal" title="Aviso Legal">
    <LegalNotice />
</LegalModal>
<LegalModal id="cookies-modal" title="Política de Cookies">
    <CookiesPolitics />
</LegalModal>
<LegalModal id="politics-modal" title="Política de Privacidad">
    <PoliticsContent />
</LegalModal>

<LegalModal id="conditions-modal" title="Términos y Condiciones">
    <ConditionsContent />
</LegalModal>

<script>
    document.addEventListener("astro:page-load", () => {
        document.querySelectorAll(".open-modal").forEach((button) => {
            button.addEventListener("click", () => {
                const modalId = button.getAttribute("data-modal");
                if (modalId) {
                    const modal = document.getElementById(
                        modalId,
                    ) as HTMLDialogElement;
                    modal?.showModal();
                }
            });
        });
    });
</script>
