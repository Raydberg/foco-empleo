---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import { extractDescription } from "../../core/utils/extractDescription";

interface Props {
    post: CollectionEntry<"blog">;
}

const { post } = Astro.props;
const { title, image,tags } = post.data;

const description = post.data.description || extractDescription(post.body);
---

<article
    class="bg-white rounded-[20px] shadow-sm border-2 border-[#DBE4E7] overflow-hidden hover:shadow-md transition-shadow duration-300 mb-12 md:h-[290px]"
>
    <div class="grid md:grid-cols-2 gap-0 h-full">
        {
            image && (
                <Image
                    src={image}
                    alt={title}
                    class="w-full h-48 md:h-full object-cover md:rounded-l-[20px]"
                    loading="eager"
                    widths={[640, 768, 1024]}
                    sizes="(max-width: 768px) 100vw, 50vw"
                    transition:name={`${post.slug}-image`}
                />
            )
        }

        <div class="py-20 px-8 flex flex-col justify-start gap-3">
            <span
                class="bg-[#0F4C5C] text-white px-4 py-1 rounded-full text-xs font-semibold uppercase w-fit"
            >
                {tags}
            </span>

            <h2
                class="text-lg md:text-xl font-bold text-gray-900 hover:text-teal-700 transition-colors leading-tight"
                transition:name={`blog-title-${post.slug}`}
            >
                <a href={`/blog/${post.slug}`}>
                    {title}
                </a>
            </h2>

            <p class="text-gray-600 text-sm leading-relaxed line-clamp-3">
                {description}
            </p>

            <a
                href={`/blog/${post.slug}`}
                class="inline-flex items-center text-teal-700 hover:text-teal-900 font-medium transition-colors text-sm self-end"
            >
                Leer m√°s
                <svg
                    class="w-4 h-4 ml-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M9 5l7 7-7 7"></path>
                </svg>
            </a>
        </div>
    </div>
</article>
